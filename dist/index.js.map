{"version":3,"file":"index.js","sources":["../src/text.tsx","../src/typo.tsx"],"sourcesContent":["import React, { Component } from 'react'\nimport Typo from './typo';\n\nconst defaultPace = 40;\nconst defaultPause = 0;\n\nconst spanStyle = {\n    display: 'inline-block'\n}\n\ninterface Props {\n    /** The pace between two chars in milliseconds. Default is 40 */\n    pace?: number;\n    /** The pace of white spaces to make the text more dynamic */\n    whiteSpacePace?: number;\n    /** The pause before starting the text in milliseconds. Default is 0 */\n    pause?: number;\n    /** Defines if the container css display rule is 'block' or 'inline-block'. Default is false */\n    block?: boolean;\n    /** Displays all the chars at once */\n    stamp?: boolean;\n    /** Prints the chars in the Text backwards */\n    rewind?: boolean;\n    /** Loops the animation */\n    loop?: boolean;\n    /** The Typo controller. Is automatically defined when a Text is in a Typo */\n    parent?: Typo;\n    /** The className assigned to every printed char */\n    charClassName?: string;\n    /** The className assigned to every white space char */\n    whiteSpaceClassName?: string;\n    /** The className of the Text container */\n    className?: string;\n    /**\n     * Called when the first char is printed\n     * @param text The current Text component\n     * */\n    onStart?: (text: Text) => void;\n    /** \n     * Called when a char is printed \n     * @param char The current printed char\n     * @param text The current Text component\n     * */\n    onChar?: (char: string, text: Text) => void;\n    /**\n     * Called when the last char is printed\n     * @param text The current Text component\n     * */\n    onStop?: (text: Text) => void;\n}\n\ninterface State {\n    display: JSX.Element[] | JSX.Element | null;\n}\n\nexport default class Text extends Component<Props, State> {\n\n    private stopped: boolean;\n    private interval: NodeJS.Timeout;\n\n    str: string;\n    iteration: number;\n\n    constructor(props: Props) {\n        super(props);\n        this.str = (this.props.children as string || '').replaceAll(' ', '\\xa0');\n    }\n\n    componentDidMount() {\n        if (!this.props.parent) {\n            this.init();\n            this.run();\n        }\n    }\n\n\n    init() {\n        this.iteration = !this.props.rewind || this.props.parent?.props.rewind ? 0 : this.str.length - 1;\n        this.stopped = false;\n        this.setState({\n            display: null\n        })\n    }\n    \n    run() {\n        const pause = this.props.pause || this.props.parent?.props.pause || defaultPause;\n        setTimeout(() => {\n            this.updateInterval();\n        }, pause);\n    }\n\n    updateInterval() {\n        clearInterval(this.interval);\n        let pace = this.str[this.iteration] != '\\xa0'\n            ? this.props.pace || this.props.parent?.props.pace || defaultPace\n            : (this.props.whiteSpacePace || this.props.parent?.props.whiteSpacePace || this.props.pace || defaultPace);\n\n        this.onStart();\n        this.interval = setInterval(() => this.play(), pace);\n    }\n\n    play() {\n        if (!this.stopped) {\n            const stamp = this.props.stamp || this.props.parent?.props.stamp;\n            const rewind = this.props.rewind || this.props.parent?.props.rewind;\n\n            if (!stamp) {\n                const chars = this.str.substr(0, this.iteration + 1).split('');\n                let display;\n\n                if (rewind) {\n                    display = chars.map((char, i) => {\n                        const style = {\n                            display: 'inline-block',\n                            animation: 'none'\n                        }\n                        return <span className={this.props.charClassName} style={style} key={i}>{char}</span>\n                    });\n                    display.pop();\n                    display.push(<span style={spanStyle} className={this.props.charClassName} key={Date.now()}>{chars.slice(-1)}</span>)\n                } else {\n                    display = chars.map((char, i) => {\n                        return <span style={spanStyle} className={this.props.charClassName} key={i}>{char}</span>\n                    });\n                }\n                this.setState({ display }, () => {\n\n                    this.iteration += rewind ? -1 : 1;\n                    if (\n                        (rewind && this.iteration < -1) ||\n                        (!rewind && this.iteration > this.str.length)\n                    ) {\n                        this.stop();\n                    } else {\n                        this.onChar();\n                    }\n                })\n            } else {\n                this.setState({\n                    display: <span style={spanStyle} className={this.props.charClassName} key={Date.now()}>{this.str}</span>\n                }, () => {\n                    this.iteration = rewind ? 0 : (this.props.children as string).length - 1;\n                    this.onChar();\n                    this.stop();\n                })\n            }\n        }\n    }\n\n    replay() {\n        this.init();\n        this.run();\n    }\n\n    show() {\n        this.setState({\n            display: this.str.split('').map((char, i) => <span style={spanStyle} key={i}>{char}</span>)\n        })\n    }\n\n    stop() {\n        if (this.props.loop) {\n            this.replay();\n        } else {\n            this.stopped = true;\n            this.onStop();\n        }\n    }\n\n    onStart() {\n        this.props.onStart?.(this);\n    }\n\n    onChar() {\n        const rewind = this.props.parent?.props.rewind || this.props.rewind;\n        const char = rewind\n            ? this.str[this.iteration + 1]\n            : this.str[this.iteration - 1];\n\n        this.props.onChar?.(char, this);\n\n        this.props.parent?.props.onChar?.(char, this.props.parent);\n    }\n\n    onStop() {\n        clearInterval(this.interval);\n        this.props.onStop?.(this);\n        this.props?.parent?.play();\n    }\n\n    render() {\n        return <div className={this.props.className} style={{\n            display: this.props.block ? 'block' : 'inline-block'\n        }}>{this.state?.display || '\\u00a0'}</div>\n    }\n}\n","import React, { Component } from 'react'\nimport Text from './text';\n\ninterface Props {\n    /** Prevents the typo from playing */\n    stop?: boolean;\n    /** Defines this typo as being the first to execute when this typo's name is in the 'next' prop of another typo */\n    first?: boolean;\n    /** Prints the chars in the Texts backwards */\n    rewind?: boolean;\n    /** Displays all the chars in the Texts at once */\n    stamp?: boolean;\n    /** The pause before starting the text in milliseconds. Default is 0 */\n    pause?: number;\n    /** The pace between two chars in milliseconds. Default is 40 */\n    pace?: number;\n    /** The pace of white spaces to make the text more dynamic */\n    whiteSpacePace?: number;\n    /** The name of the next Typo to render */\n    next?: string;\n    /** the name of the typo */\n    name?: string;\n    /** the className of the typo container */\n    className?: string;\n\n    /**\n     * Called when the component is mounted\n     * @param typo The current Typo component\n     * */\n    onStart?: (typo: Typo) => void;\n    /**\n    * Called when the current Text component is mounted\n    * @param text The current Text component\n    * @param typo The current Typo component\n    * */\n    onText?: (text: Text, typo: Typo) => void;\n    /**\n     * Called when the last char in the last Text is printed\n     * @param typo The current Typo component\n     * */\n    onStop?: (typo: Typo) => void;\n    /**\n     * Called when a char is printed\n     * @param char The current printed char\n     * @param typo The current Typo component\n     * */\n    onChar?: (char: string, typo: Typo) => void;\n}\n\ninterface State {\n    display: JSX.Element[] | JSX.Element;\n}\n\nexport default class Typo extends Component<Props, State> {\n\n    private static typos: Map<string, Typo> = new Map();\n    private static first: Typo;\n\n    static play(typoName: string) {\n        Typo.typos.get(typoName)?.replay();\n    }\n\n    static stop(typoName: string) {\n        Typo.typos.get(typoName)?.stop();\n    }\n\n    private initiated: boolean;\n\n    name: string;\n    texts: JSX.Element[];\n    textRefs: React.RefObject<Text>[] = [];\n    iteration: number;\n\n    constructor(props: Props) {\n        super(props);\n        this.init();\n    }\n\n    componentDidMount() {\n        if (!this.props.stop) {\n            //si le typo est dans le next d'un autre, on ne lance pas play sauf s'il est first\n            if (!Array.from(Typo.typos.values()).some(typo => typo.props.next == this.name) || Typo.first == this) {\n                this.init();\n                this.play();\n            }\n        }\n    }\n\n    init() {\n        this.initiated = false;\n\n        this.textRefs.forEach(text => text.current?.init());\n\n        this.texts = React.Children.map(this.props.children as JSX.Element, child => {\n            let ref = React.createRef<Text>();\n            this.textRefs.push(ref);\n\n            return <Text {...child.props} ref={ref} parent={this} rewind={this.props.rewind || child.props.rewind}>{child.props.children || ''}</Text>\n        })\n\n        this.iteration = !this.props.rewind ? 0 : this.texts.length == 1 ? 0 : this.texts.length - 1;\n\n        this.name = this.props.name || '_' + Math.random().toString(36).substr(2, 9);\n\n        Typo.typos.set(this.name, this);\n\n        if (typeof Typo.first == 'undefined') {\n            Typo.first = this;\n        }\n    }\n\n    play() {\n        if (!this.initiated) {\n            this.onStart();\n            this.initiated = true;\n        }\n\n        if (\n            (this.props.rewind && this.iteration < 0) || (!this.props.rewind && this.iteration > this.texts.length - 1)) {\n            this.stop();\n        } else {\n            if (this.props.rewind) {\n                for (let i = this.iteration; i >= 0; i--) {\n                    this.textRefs[i].current?.show();\n                }\n            }\n\n            this.textRefs[this.iteration]?.current?.init();\n            this.textRefs[this.iteration]?.current?.run();\n\n            this.iteration += this.props.rewind ? -1 : 1;\n            this.onText();\n        }\n    }\n\n    replay() {\n        this.init();\n        this.play();\n    }\n\n    stop() {\n        this.onStop();\n    }\n\n    onStart() {\n        this.props.onStart?.(this);\n    }\n\n    onText() {\n        const text = this.props.rewind\n            ? this.textRefs[this.iteration + 1]?.current\n            : this.textRefs[this.iteration - 1]?.current;\n\n        if (text) {\n            this.props.onText?.(text, this);\n        }\n    }\n\n    //on lance le event handler onStop et on lance le play du prochain Typo\n    onStop() {\n        this.props.onStop?.(this);\n        if (this.props.next) {\n            Typo.typos.get(this.props.next)?.play();\n        }\n    }\n\n    render() {\n        return <div className={this.props.className} style={{ display: 'inline-block' }}>{this.texts}</div>\n    }\n}\n"],"names":["defaultPace","defaultPause","spanStyle","display","Text","props","str","children","replaceAll","componentDidMount","parent","init","run","iteration","rewind","length","stopped","setState","pause","setTimeout","updateInterval","clearInterval","interval","pace","whiteSpacePace","onStart","setInterval","play","stamp","chars","substr","split","map","char","i","style","animation","React","className","charClassName","key","pop","push","Date","now","slice","stop","onChar","replay","show","loop","onStop","render","block","state","Component","Typo","typoName","typos","get","Array","from","values","some","typo","next","name","first","initiated","textRefs","forEach","text","current","texts","Children","child","ref","createRef","Math","random","toString","set","onText","Map"],"mappings":"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"}