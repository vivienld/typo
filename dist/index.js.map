{"version":3,"file":"index.js","sources":["../src/animation/base.tsx","../src/animation/rotate.in.center.tsx","../src/animation/index.tsx","../src/text.tsx"],"sourcesContent":["import Style, { StyledComponent } from 'styled-components'\n\nexport default function base(): StyledComponent<\"span\", any, {}, never> {\n    return Style.span`display:inline-block;`\n}","import Style, { StyledComponent } from 'styled-components';\n\nexport default function rotateInCenter(duration: number): StyledComponent<\"span\", any, {}, never> {\n    return Style.span`\n    display:inline-block;\n    @keyframes rotate-in-center{\n        0%{\n            -webkit-transform:rotate(-360deg);\n            transform:rotate(-360deg);\n            opacity:0;\n        }\n            100%{\n                -webkit-transform:rotate(0);\n                transform:rotate(0);\n                opacity:1\n            }\n        }\n    }\n    animation: rotate-in-center ${duration / 1000}s cubic-bezier(.25,.46,.45,.94) both;\n    `\n}","import base from './base'\nimport rotateInCenter from './rotate.in.center'\n\nexport default class Animation {\n    static base = base;\n    static rotateInCenter = rotateInCenter;\n}","import React, { Component } from 'react'\nimport { StyledComponent } from 'styled-components';\nimport StyledComponents from './animation';\n\nconst defaultPace = 40;\nconst defaultDelay = 0;\n\ninterface Props {\n    pace?: number;\n    delay?: number;\n    stamp?: boolean;\n    rewind?: boolean;\n    animation?: (duration: number) => StyledComponent<\"span\", any, {}, never>;\n    onStart?: (text: Text) => void;\n    onPlay?: (text: Text) => void;\n    onStop?: (text: Text) => void;\n}\n\ninterface State {\n    display: JSX.Element[] | JSX.Element;\n}\n\nexport default class Text extends Component<Props, State> {\n\n    interval: NodeJS.Timeout;\n    iteration: number;\n\n    constructor(props: Props) {\n        super(props);\n    }\n\n    componentDidMount() {\n        setTimeout(() => this.run(), this.props.delay || defaultDelay);\n        this.iteration = !this.props.rewind ? 0 : (this.props.children as string || '').length - 1;\n        this.onStart();\n    }\n\n    run() {\n        this.interval = setInterval((() => this.play()), this.props.pace || defaultPace)\n    }\n\n    play() {\n        const Element = this.props.animation?.(this.props.pace || defaultPace) || StyledComponents.base();\n        if (!this.props.stamp) {\n            const chars = (this.props.children as string || '').substr(0, this.iteration + 1).split('');\n            this.setState({\n                display: chars.map((char, i) => {\n                    if (i == chars.length - 1) {\n                        return <Element key={i}>{char}</Element>;\n                    } else {\n                        return <span key={i}>{char}</span>\n                    }\n                })\n            }, () => {\n                this.iteration += this.props.rewind ? -1 : 1;\n                if (\n                    (this.props.rewind && this.iteration < -1) ||\n                    (!this.props.rewind && this.iteration > (this.props.children as string || '').length)\n                ) {\n                    this.stop();\n                } else {\n                    this.onPlay();\n                }\n            })\n        } else {\n            this.setState({\n                display: <Element>{(this.props.children as string || '')}</Element>\n            }, () => {\n                this.iteration = this.props.rewind ? 0 : (this.props.children as string).length - 1;\n                this.onPlay();\n            })\n        }\n    }\n\n    stop() {\n        clearInterval(this.interval);\n        this.onStop();\n    }\n\n    onStart() {\n        this.props.onStart?.(this);\n    }\n\n    onPlay() {\n        this.props.onPlay?.(this);\n    }\n\n    onStop() {\n        this.props.onStop?.(this);\n    }\n    render() {\n        return <React.Fragment>{this.state?.display}</React.Fragment>\n    }\n}\n"],"names":["base","Style","span","rotateInCenter","duration","Animation","defaultPace","defaultDelay","Text","props","componentDidMount","setTimeout","run","delay","iteration","rewind","children","length","onStart","interval","setInterval","play","pace","Element","animation","StyledComponents","stamp","chars","substr","split","setState","display","map","char","i","React","key","stop","onPlay","clearInterval","onStop","render","Fragment","state","Component"],"mappings":"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"}