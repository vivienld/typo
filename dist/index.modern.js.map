{"version":3,"file":"index.modern.js","sources":["../src/animation/base.tsx","../src/animation/rotate.in.center.tsx","../src/animation/index.tsx","../src/text.tsx","../src/typo.tsx"],"sourcesContent":["import Style, { StyledComponent } from 'styled-components'\n\nexport default function base(): StyledComponent<\"span\", any, {}, never> {\n    return Style.span`display:inline-block;`\n}","import Style, { StyledComponent } from 'styled-components';\n\nexport default function rotateInCenter(duration: number): StyledComponent<\"span\", any, {}, never> {\n    return Style.span`\n    display:inline-block;\n    @keyframes rotate-in-center{\n        0%{\n            -webkit-transform:rotate(-360deg);\n            transform:rotate(-360deg);\n            opacity:0;\n        }\n            100%{\n                -webkit-transform:rotate(0);\n                transform:rotate(0);\n                opacity:1\n            }\n        }\n    }\n    animation: rotate-in-center ${duration / 1000}s cubic-bezier(.25,.46,.45,.94) both;\n    `\n}","import base from './base'\nimport rotateInCenter from './rotate.in.center'\n\nexport default class Animation {\n    static base = base;\n    static rotateInCenter = rotateInCenter;\n}","import React, { Component } from 'react'\nimport { StyledComponent } from 'styled-components';\nimport StyledComponents from './animation';\nimport Typo from './typo';\n\nconst defaultPace = 40;\nconst defaultDelay = 0;\n\ninterface Props {\n    pace?: number;\n    delay?: number;\n    stamp?: boolean;\n    rewind?: boolean;\n    parent?: Typo;\n    animation?: (duration: number) => StyledComponent<\"span\", any, {}, never>;\n    onStart?: (text: Text) => void;\n    onPlay?: (text: Text) => void;\n    onStop?: (text: Text) => void;\n}\n\ninterface State {\n    display: JSX.Element[] | JSX.Element;\n}\n\nexport default class Text extends Component<Props, State> {\n\n    interval: NodeJS.Timeout;\n    iteration: number;\n\n    constructor(props: Props) {\n        super(props);\n    }\n\n    componentDidMount() {\n        if (!this.props.parent) {\n            setTimeout(() => this.run(), this.props.delay || defaultDelay);\n        }\n    }\n    \n    run() {\n        this.iteration = !this.props.rewind ? 0 : (this.props.children as string || '').length - 1;\n        this.onStart();\n        this.interval = setInterval((() => this.play()), this.props.pace || defaultPace)\n    }\n\n    play() {\n        const Element = this.props.animation?.(this.props.pace || defaultPace) || StyledComponents.base();\n\n        if (!this.props.stamp) {\n            const chars = (this.props.children as string || '').substr(0, this.iteration + 1).replaceAll(' ', '\\xa0').split('');\n            this.setState({\n                display: chars.map((char, i) => {\n                    if (i == chars.length - 1) {\n                        return <Element key={i}>{char}</Element>;\n                    } else {\n                        return <span key={i}>{char}</span>\n                    }\n                })\n            }, () => {\n                this.iteration += this.props.rewind ? -1 : 1;\n                if (\n                    (this.props.rewind && this.iteration < -1) ||\n                    (!this.props.rewind && this.iteration > (this.props.children as string || '').length)\n                ) {\n                    this.stop();\n                } else {\n                    this.onPlay();\n                }\n            })\n        } else {\n            this.setState({\n                display: <Element>{(this.props.children as string || '').replaceAll(' ', '\\xa0')}</Element>\n            }, () => {\n                this.iteration = this.props.rewind ? 0 : (this.props.children as string).length - 1;\n                this.onPlay();\n                this.stop();\n            })\n        }\n    }\n\n    show() {\n        this.setState({\n            display: <span>{this.props.children}</span>\n        })\n    }\n\n    stop() {\n        clearInterval(this.interval);\n        this.onStop();\n    }\n\n    onStart() {\n        this.props.onStart?.(this);\n    }\n\n    onPlay() {\n        this.props.onPlay?.(this);\n    }\n\n    onStop() {\n        this.props.onStop?.(this);\n        this.props?.parent?.play();\n    }\n    render() {\n        return <React.Fragment>{this.state?.display}</React.Fragment>\n    }\n}\n","import React, { Component } from 'react'\nimport Text from './text';\n\ninterface Props {\n    rewind?: boolean;\n    onStart?: (typo: Typo) => void;\n    onPlay?: (typo: Typo) => void;\n    onStop?: (typo: Typo) => void;\n}\n\ninterface State {\n    display: JSX.Element[] | JSX.Element;\n}\n\nexport default class Typo extends Component<Props, State> {\n\n    texts: JSX.Element[];\n    textRefs: React.RefObject<Text>[] = [];\n    iteration: number;\n\n    constructor(props: Props) {\n        super(props);\n        this.iteration = !this.props.rewind ? 0 : (this.props.children as string || '').length - 1;\n\n        this.texts = React.Children.map(this.props.children as JSX.Element, child => {\n            let ref = React.createRef<Text>();\n            this.textRefs.push(ref);\n\n            return <Text {...child.props} ref={ref} parent={this} rewind={this.props.rewind}>{child.props.children}</Text>\n        })\n\n    }\n\n    componentDidMount() {\n        this.onStart();\n        this.run();\n    }\n\n    run() {\n        this.play();\n    }\n\n    play() {\n        if (this.props.rewind) {\n            for (let i = 0; i <= this.iteration; i++) {\n                this.textRefs[i].current?.show();\n            }\n\n            this.textRefs[this.iteration]?.current?.run();\n\n        } else {\n            this.textRefs[this.iteration]?.current?.run();\n        }\n\n        this.iteration += this.props.rewind ? -1 : 1;\n\n        if (\n            (this.props.rewind && this.iteration < -1) ||\n            (!this.props.rewind && this.iteration > this.texts.length)\n        ) {\n            this.stop();\n        } else {\n            this.onPlay();\n        }\n    }\n\n    stop() {\n        this.onStop();\n    }\n\n    onStart() {\n        this.props.onStart?.(this);\n    }\n\n    onPlay() {\n        this.props.onPlay?.(this);\n    }\n\n    onStop() {\n        this.props.onStop?.(this);\n    }\n\n    render() {\n        return <React.Fragment>{this.texts}</React.Fragment>\n    }\n}\n"],"names":["base","Style","span","rotateInCenter","duration","Animation","defaultPace","defaultDelay","Text","Component","constructor","props","componentDidMount","parent","setTimeout","run","delay","iteration","rewind","children","length","onStart","interval","setInterval","play","pace","Element","animation","StyledComponents","stamp","chars","substr","replaceAll","split","setState","display","map","char","i","React","key","stop","onPlay","show","clearInterval","onStop","render","Fragment","state","Typo","texts","Children","child","ref","createRef","textRefs","push","current"],"mappings":"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"}